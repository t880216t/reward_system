(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{"f8/y":function(e,t,a){e.exports={container:"antd-pro\\pages\\-legacy\\index-container",addbutton:"antd-pro\\pages\\-legacy\\index-addbutton",colum_container:"antd-pro\\pages\\-legacy\\index-colum_container",account:"antd-pro\\pages\\-legacy\\index-account",name:"antd-pro\\pages\\-legacy\\index-name",total:"antd-pro\\pages\\-legacy\\index-total"}},"sB/O":function(e,t,a){"use strict";var l=a("lP4d"),n=a("nVH6");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("vVuu");var d=l(a("x+xb")),r=l(a("9x0K"));a("dTHA");var i=l(a("KAfV"));a("yyMw");var u=l(a("MhBB"));a("1Js6");var c=l(a("EQsl"));a("BRY0");var s=l(a("ryjc"));a("1CTW");var o=l(a("bKfs"));a("uQhA");var f=l(a("6s9Z")),p=l(a("hp2J")),m=l(a("qcWJ")),y=l(a("kOQm")),h=l(a("lrLM")),E=l(a("Q+0f"));a("rXIa");var g=l(a("+GTJ"));a("8vKX");var v=l(a("2B2U"));a("k50B");var w=l(a("vOJe"));a("mGKJ");var b,x,R,L=l(a("z+Wi")),q=n(a("W897")),C=a("32uE"),k=l(a("f8/y")),S=L.default.Item,V=w.default.Option,A=L.default.create()(function(e){var t=e.modalVisible,a=e.form,l=e.handleAdd,n=e.handleEdit,d=e.handleModalVisible,r=e.record,i=e.playerList,u=function(){a.validateFields(function(e,t){e||(a.resetFields(),r.account?n(t):l(t))})};return q.default.createElement(g.default,{destroyOnClose:!0,title:"\u65b0\u589e\u73a9\u5bb6\u6570\u636e",visible:t,onOk:u,onCancel:function(){return d()}},q.default.createElement(S,{labelCol:{span:5},wrapperCol:{span:15},label:"\u8d26\u53f7"},a.getFieldDecorator("account",{initialValue:r.player_id||void 0})(q.default.createElement(w.default,{disabled:!!r.account,showSearch:!0,size:"small",style:{width:200},placeholder:"\u8bf7\u9009\u62e9\u73a9\u5bb6",optionFilterProp:"children",filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},i.map(function(e){return q.default.createElement(V,{key:e.id,value:e.id},"".concat(e.account,"--[").concat(e.name,"]"))})))),q.default.createElement(S,{labelCol:{span:5},wrapperCol:{span:15},label:"\u989d\u5916\u5956\u52b1"},a.getFieldDecorator("bonus",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5956\u52b1\u989d\uff01"}],initialValue:r.bonus||0})(q.default.createElement(v.default,{style:{width:200},size:"small",min:0}))),q.default.createElement(S,{labelCol:{span:5},wrapperCol:{span:15},label:"\u7b7e\u7ea6\u5956\u52b1"},a.getFieldDecorator("sign",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5956\u52b1\u989d\uff01"}],initialValue:r.sign||0})(q.default.createElement(v.default,{style:{width:200},size:"small",min:0}))),q.default.createElement(S,{labelCol:{span:5},wrapperCol:{span:15},label:"BUG\u5956\u52b1(*0.3)"},a.getFieldDecorator("bug",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5956\u52b1\u989d\uff01"}],initialValue:r.bug||0})(q.default.createElement(v.default,{style:{width:200},size:"small",min:0}))))}),M=(b=(0,C.connect)(function(e){var t=e.leyacg;return{leyacg:t}}),b((R=function(e){function t(){var e,a;(0,p.default)(this,t);for(var l=arguments.length,n=new Array(l),d=0;d<l;d++)n[d]=arguments[d];return a=(0,y.default)(this,(e=(0,h.default)(t)).call.apply(e,[this].concat(n))),a.state={record:{},rewardList:[],playerList:[],lastReset:""},a.queryRewardList=function(){a.props.dispatch({type:"leyacg/queryRewardList"}).then(function(){var e=a.props.leyacg,t=e.rewardList,l=e.lastReset;a.setState({rewardList:t,lastReset:l})})},a.queryPlayerList=function(){a.props.dispatch({type:"leyacg/queryPlayerList",payload:{}}).then(function(){var e=a.props.leyacg.playerList;a.setState({playerList:e})})},a.handleReset=function(){a.props.dispatch({type:"leyacg/queryResetReward"}).then(function(){a.queryRewardList()})},a.handleSendAll=function(){a.props.dispatch({type:"leyacg/querySendAllReward"}).then(function(){a.queryRewardList()})},a.handleShowAdd=function(){a.setState({modalVisible:!0})},a.handleModalVisible=function(){a.setState({modalVisible:!1,record:{}})},a.handleAdd=function(e){e.account&&a.props.dispatch({type:"leyacg/queryAddReward",payload:e}).then(function(){a.queryRewardList(),a.handleModalVisible()})},a.querySendReward=function(e){a.props.dispatch({type:"leyacg/querySendReward",payload:{id:e}}).then(function(){a.queryRewardList()})},a.handleEdit=function(e){var t=a.state.record.id;e.id=t,a.props.dispatch({type:"leyacg/queryEditReward",payload:e}).then(function(){a.queryRewardList(),a.handleModalVisible()})},a.handleDelete=function(e){a.props.dispatch({type:"leyacg/queryDeleteReward",payload:{id:e}}).then(function(){a.queryRewardList()})},a.handleShowEdit=function(e){a.setState({record:e,modalVisible:!0})},a}return(0,E.default)(t,e),(0,m.default)(t,[{key:"componentWillMount",value:function(){this.queryRewardList(),this.queryPlayerList()}},{key:"render",value:function(){var e=this,t=this.state,a=t.modalVisible,l=t.record,n=t.playerList,p=t.rewardList,m=t.lastReset,y=[{title:"\u5e8f\u53f7",dataIndex:"index",key:"index",render:function(e,t){return q.default.createElement("span",null,t.index)}},{title:"\u7528\u6237\u4fe1\u606f",dataIndex:"name",key:"name",render:function(e,t){return q.default.createElement("div",{className:k.default.colum_container},q.default.createElement("span",null,"\u8d26\u53f7\uff1a",q.default.createElement("span",{className:k.default.account},t.account)),q.default.createElement("span",null,"\u89d2\u8272\uff1a",q.default.createElement("span",{className:k.default.name},t.name)))}},{title:"\u53d1\u653e\u72b6\u6001",key:"status",dataIndex:"status",render:function(e,t){return q.default.createElement("div",null,1===t.status?q.default.createElement(f.default,{status:"default",text:"\u5df2\u53d1\u653e"}):q.default.createElement(f.default,{status:"processing",text:"\u672a\u53d1\u653e"}))}},{title:"\u5e94\u5956\u52b1\u8d44\u91d1",key:"give",dataIndex:"give",defaultSortOrder:"descend",sorter:function(e,t){return e.give-t.give},render:function(e,t){return q.default.createElement("div",null,1===t.status?q.default.createElement(o.default,{value:t.give,style:{color:"#95a5a6"}}):q.default.createElement(o.default,{value:t.give,style:{color:"#44bd32"}}))}},{title:"\u672c\u5468\u79ef\u5206\u660e\u7ec6",dataIndex:"detail",key:"detail",render:function(e,t){return q.default.createElement("div",{className:k.default.colum_container},q.default.createElement("span",null,"\u989d\u5916\u79ef\u5206\uff1a",q.default.createElement("span",{className:k.default.name},t.bonus)),q.default.createElement("span",null,"\u7b7e\u7ea6\u79ef\u5206\uff1a",q.default.createElement("span",{className:k.default.name},t.sign)),q.default.createElement("span",null,"bug\u79ef\u5206\uff1a",q.default.createElement("span",{className:k.default.name},(.3*t.bug).toFixed(1))),q.default.createElement("span",null,"\u4e0a\u5468\u7ed3\u4f59\uff1a",q.default.createElement("span",{className:k.default.name},t.last_week)))}},{title:"\u603b\u5956\u52b1\u79ef\u5206",key:"total",dataIndex:"total",render:function(e,t){return q.default.createElement("span",{className:k.default.total},t.total)}},{title:"\u66f4\u65b0\u65f6\u95f4",key:"update_time",dataIndex:"update_time",width:"10%"},{title:"\u64cd\u4f5c",key:"action",render:function(t,a){return q.default.createElement("span",null,0===a.status&&q.default.createElement(s.default,{title:"\u786e\u8ba4\u5df2\u53d1\u653e\u8fd9\u6761\u5956\u52b1?",onConfirm:function(){return e.querySendReward(a.id)}},q.default.createElement("a",null,"\u53d1\u653e")),0===a.status&&q.default.createElement(c.default,{type:"vertical"}),0===a.status&&q.default.createElement("a",{onClick:function(){return e.handleShowEdit(a)}},"\u7f16\u8f91"),0===a.status&&q.default.createElement(c.default,{type:"vertical"}),q.default.createElement(s.default,{title:"\u786e\u8ba4\u5220\u9664\u8fd9\u6761\u5956\u52b1?",onConfirm:function(){return e.handleDelete(a.id)}},q.default.createElement("a",null,"\u5220\u9664")))}}],h={handleAdd:this.handleAdd,handleEdit:this.handleEdit,handleModalVisible:this.handleModalVisible};return q.default.createElement(d.default,{className:k.default.container},q.default.createElement("div",{className:k.default.addbutton},q.default.createElement("div",{style:{flex:1}},q.default.createElement(u.default,{icon:"dollar",type:"primary",onClick:function(){return e.handleShowAdd()}},"\u65b0\u589e\u5956\u52b1")),q.default.createElement("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"flex-end",marginRight:30}},q.default.createElement("div",null,q.default.createElement(s.default,{title:"\u786e\u5b9a\u5df2\u7ecf\u53d1\u653e\u6240\u6709\u5956\u52b1?",onConfirm:function(){return e.handleSendAll()}},q.default.createElement(u.default,{icon:"swap",style:{backgroundColor:"#f9ca24",borderColor:"#f9ca24",width:120,marginRight:10},type:"primary"},"\u4e00\u952e\u53d1\u653e")),q.default.createElement(u.default,{icon:"reload",style:{backgroundColor:"#d63031",borderColor:"#d63031",width:120},type:"primary",onClick:function(){return e.handleReset()}},"\u91cd\u7f6e\u672c\u5468")),q.default.createElement("div",{style:{fontSize:14,marginTop:5}},"\u6700\u8fd1\u91cd\u7f6e\uff1a",m))),q.default.createElement(i.default,{columns:y,dataSource:p,pagination:!1}),q.default.createElement(A,(0,r.default)({},h,{modalVisible:a,record:l,playerList:n})))}}]),t}(q.Component),x=R))||x),N=M;t.default=N}}]);